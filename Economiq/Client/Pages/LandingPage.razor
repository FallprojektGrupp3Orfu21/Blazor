@page "/"
@using Economiq.Client.Components.Modals
@inject NavigationManager _nav;
@inject AppState _appState
@implements IDisposable
<style>
    .hover {
        cursor: pointer;
    }

</style>

<AuthorizeView>
    <Authorized>
        <h2>Welcome @context.User.Identity.Name</h2>
    </Authorized>
    <NotAuthorized>
        @if (aboutUs)
        {
            <LandingPageModal CloseModal="@CloseModal"></LandingPageModal>

        }


        <div>
            <p>Here comes the logo</p>
        </div>


        <div>

            <MudButton Variant="Variant.Outlined" Color="Color.Primary" @onclick="@(NavigateRegister)">Register</MudButton>
            <MudButton Variant="Variant.Filled" Color="Color.Primary">Log in</MudButton>
        </div>

        <div>
            <p>About us <span class="hover" @onclick="@(ShowModal)">+</span></p>
        </div>
    </NotAuthorized>
</AuthorizeView>



@code {
    private bool aboutUs = false;

    public void NavigateRegister()
    {
        _nav.NavigateTo("/register");
    }

    public void ShowModal()
    {
        aboutUs = true;
    }

    public void CloseModal()
    {
        aboutUs = false;
    }

    protected override async Task OnInitializedAsync()
    {
        _appState.SetPageTitle("Economiq");
        _appState.OnStateChange += StateHasChanged;
    }

    public void Dispose()
    {
        _appState.OnStateChange -= StateHasChanged;
    }
}
